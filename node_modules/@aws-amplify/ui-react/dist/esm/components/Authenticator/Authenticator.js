import*as e from"react";import{configureComponent as s}from"@aws-amplify/ui";import{AuthenticatorProvider as t,useAuthenticator as r}from"@aws-amplify/ui-react-core";import{CustomComponentsContext as i}from"./hooks/useCustomComponents/index.js";import"../../primitives/View/View.js";import{Router as o}from"./Router/Router.js";import{SetupTOTP as n}from"./SetupTOTP/SetupTOTP.js";import{SignIn as a}from"./SignIn/SignIn.js";import{SignUp as m}from"./SignUp/SignUp.js";import{ForceNewPassword as u}from"./ForceNewPassword/ForceNewPassword.js";import"./ResetPassword/ConfirmResetPassword.js";import{ResetPassword as c}from"./ResetPassword/ResetPassword.js";import{defaultComponents as p}from"./hooks/useCustomComponents/defaultComponents.js";import{VERSION as f}from"../../version.js";function l({children:s,className:t,components:n,formFields:a,hideSignUp:m,initialState:u,loginMechanisms:c,signUpAttributes:f,services:l,socialProviders:g,variation:d}){const{route:w,signOut:P,user:j}=r((({route:e,signOut:s,user:t})=>[e,s,t]));!function(s){const{route:t,initializeMachine:i}=r((({route:e})=>[e])),o=e.useRef(!1);e.useEffect((()=>{o.current||"setup"!==t||(i(s),o.current=!0)}),[i,t,s])}({initialState:u,loginMechanisms:c,services:l,signUpAttributes:f,socialProviders:g,formFields:a});const S=e.useMemo((()=>({components:Object.assign(Object.assign({},p),n)})),[n]);return"authenticated"===w||"signOut"===w?s?e.createElement(e.Fragment,null,"function"==typeof s?s({signOut:P,user:j}):s):null:e.createElement(i.Provider,{value:S},e.createElement(o,{className:t,hideSignUp:m,variation:d}))}function g(r){return e.useEffect((()=>{s({packageName:"@aws-amplify/ui-react",version:f})}),[]),e.createElement(t,null,e.createElement(l,Object.assign({},r)))}g.Provider=t,g.ResetPassword=c,g.SetupTOTP=n,g.SignIn=a,g.SignUp=m,g.ForceNewPassword=u;export{g as Authenticator,l as AuthenticatorInternal};
